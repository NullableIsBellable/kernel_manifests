{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "9acc628e_de8999f8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2021-01-20T20:21:13Z",
      "side": 1,
      "message": "prebuilts/misc is deprecated. And lz4 has been added to the kernel-build-tools\n\nhttps://android.googlesource.com/kernel/prebuilts/build-tools/+/refs/heads/master/linux-x86/bin/\n\nif using build/build.sh that is already in PATH",
      "revId": "e6e7cfdf0974e3c234b4b33631be2cebac200bd2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d9d11be8_127c8704",
        "filename": "default.xml",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2021-01-20T20:21:13Z",
      "side": 1,
      "message": "lz4 is already part of the kernel-build-tools",
      "revId": "e6e7cfdf0974e3c234b4b33631be2cebac200bd2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6f894e73_3143867a",
        "filename": "default.xml",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1437603
      },
      "writtenOn": "2021-02-09T19:09:49Z",
      "side": 1,
      "message": "Revisting this.  Using the lz4 from kernel-build-tools, and relying on the kernel build to generate an `Image.lz4` results in a kernel image which does not boot.\n\nIf I instead use the one from prebuilts/misc to generate the Image.lz4, it boots.\n\nHere\u0027s what I added to my build.config to make it work.\n```\nEXTRA_CMDS\u003d\"lz4_compress\"\nLZ4_PREBUILTS_BIN\u003dprebuilts/misc/linux-x86/lz4\nfunction lz4_compress() {\n        ./${LZ4_PREBUILTS_BIN}/lz4c -f ${OUT_DIR}/arch/arm64/boot/Image ${OUT_DIR}/arch/arm64/boot/Image.lz4\n}\n```\n\nAre there other arm64 platforms using lz4 from kernel-build-tools to generate an Image.lz4 which actually boots?",
      "parentUuid": "d9d11be8_127c8704",
      "revId": "e6e7cfdf0974e3c234b4b33631be2cebac200bd2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e6e0b443_ac034971",
        "filename": "default.xml",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1437603
      },
      "writtenOn": "2021-02-09T20:24:11Z",
      "side": 1,
      "message": "OK, so I think I figured out the problem.\n\nTurns out that problem is not the lz4 binary itself.  The problem is using kernel\u0027s Image.lz4 make target.  The kernel build passes the legacy option (-l) to lz4 which u-boot fails to uncompress.\n\nTherefore, the build.config has to have a separate step to generate an Image.lz4 which does not pass -l to lz4.",
      "parentUuid": "6f894e73_3143867a",
      "revId": "e6e7cfdf0974e3c234b4b33631be2cebac200bd2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}